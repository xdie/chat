<html>

    <head>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">

   <title>Chat Campus Virtual IGA</title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

    <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">


    <script>

    $(document).ready( function (){
          var socket = io('http://192.168.1.189:3000');
          socket.on('toClient', function (msg) {


          console.log(msg);

          var temp ='<li class="left clearfix"><span class="chat-img pull-left">'+
                    '<img src="http://www.imran.com/xyper_images/icon-user-default.png" width="50px" heigth="50px" alt="User Avatar" class="img-circle" />'+
                    '</span><div class="chat-body clearfix" style="padding-left: 60px;"><div class="header"><strong class="primary-font">'+msg[0]+'</strong> <small class="pull-right text-muted">'+
                    '<span class="glyphicon glyphicon-time"></span> '+msg[3]+'</small></div><p>'+msg[2]+'</p></div></li>';

          $('#chat').append(temp);
          $("#chat").animate({ scrollTop: $('#chat')[0].scrollHeight}, 1000);
      });


        $('#chatter').submit(function (e) {

            e.preventDefault();
            var msg = $('#msg').val();
            $('#msg').val('');
            socket.emit('toServer', msg);

        });
    });
    </script>
   </head>
  <body>
<section>
<div class="container">
    <div class="row">
        <div class="col-md-5">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <span class="glyphicon glyphicon-comment"></span> IGA Campus Chat
                    <div class="btn-group pull-right">
                        <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                            <span class="glyphicon glyphicon-chevron-down"></span>
                        </button>
                        <ul class="dropdown-menu slidedown">
                            <li><a href="http://www.jquery2dotnet.com"><span class="glyphicon glyphicon-refresh">
                            </span>Refresh</a></li>
                            <li class="divider"></li>
                            <li><a href="http://www.jquery2dotnet.com"><span class="glyphicon glyphicon-off"></span>
                                Sign Out</a></li>
                        </ul>
                    </div>
                </div>
                <div id="chat" class="panel-body" style="overflow: auto; max-height: 400px; ">
                    <ul class="chat">
                      <!-- Aca va el codigo injectado -->

                    </ul>
                </div>
                <form class="pure-form" id="chatter" autocomplete="off">
                <div class="panel-footer">
                    <div class="input-group">
                        <input id="msg" type="text" class="form-control input-sm" placeholder="Mensaje..." />
                        <span class="input-group-btn">
                            <button class="btn btn-warning btn-sm" type="submit">Enviar</button>
                        </span>
                    </div>
                </div>
                </form>
              </div>
            </div>
        </div>
    </div>
</div>

    </section>
  </body>
</html>
